<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <th:block th:replace="~{fragments/layout :: head('ƒêƒÉng Nh·∫≠p')}"></th:block>
    <link rel="stylesheet" th:href="@{/css/register.css}">
</head>

<body>
<!-- Floating Background Elements -->
<div class="floating-elements">
    <div class="floating-element">üßß</div>
    <div class="floating-element">üèÆ</div>
    <div class="floating-element">üéä</div>
    <div class="floating-element">‚ú®</div>
</div>

<!-- Back to Home -->
<a class="back-home" href="/">
    <i class="fas fa-home"></i>
    <span>V·ªÅ Trang Ch·ªß</span>
</a>

<!-- Profile or Login Button -->
<div sec:authorize="isAuthenticated()" class="profile-menu">
    <div class="profile-circle">
        <a href="/profile" title="Th√¥ng tin c√° nh√¢n">
            <img src="/img/default-avatar.png" alt="Profile" class="profile-avatar">
        </a>
    </div>
</div>
<div sec:authorize="!isAuthenticated()" class="login-button">
    <a href="/login" class="btn btn-primary">ƒêƒÉng nh·∫≠p</a>
</div>

<!-- Main Login Wrapper -->
<div class="register-wrapper">
    <div class="register-container">
        <div class="row g-0">
            <!-- Left Panel - Branding -->
            <div class="col-md-6 col-lg-5">
                <div class="brand-panel">
                    <div class="brand-logo">
                        <span class="logo-icon">üßß</span>
                        <h1 class="brand-title">T·∫øt Market</h1>
                        <p class="brand-subtitle">Ch√†o m·ª´ng b·∫°n tr·ªü l·∫°i!</p>
                    </div>

                    <div class="benefits-grid">
                        <div class="benefit-item">
                            <div class="benefit-icon">
                                <i class="fas fa-gift"></i>
                            </div>
                            <div class="benefit-text">
                                H√†ng ngh√¨n s·∫£n ph·∫©m T·∫øt ch·∫•t l∆∞·ª£ng cao
                            </div>
                        </div>

                        <div class="benefit-item">
                            <div class="benefit-icon">
                                <i class="fas fa-shipping-fast"></i>
                            </div>
                            <div class="benefit-text">
                                Giao h√†ng nhanh ch√≥ng to√†n qu·ªëc
                            </div>
                        </div>

                        <div class="benefit-item">
                            <div class="benefit-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="benefit-text">
                                B·∫£o h√†nh ch·∫•t l∆∞·ª£ng 100%
                            </div>
                        </div>

                        <div class="benefit-item">
                            <div class="benefit-icon">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="benefit-text">
                                Ph·ª•c v·ª• t·∫≠n t√¢m, chu ƒë√°o
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Login Form -->
            <div class="col-md-6 col-lg-7">
                <div class="form-panel">
                    <div class="form-header">
                        <h2 class="form-title">ƒêƒÉng Nh·∫≠p</h2>
                        <p class="form-subtitle">Ch√†o m·ª´ng b·∫°n tr·ªü l·∫°i! Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c mua s·∫Øm.</p>
                    </div>

                    <!-- Alert Messages -->
                    <div class="alert alert-danger" th:if="${param.error}">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Email ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c. Vui l√≤ng th·ª≠ l·∫°i!</span>
                    </div>

                    <div class="alert alert-success" th:if="${param.logout}">
                        <i class="fas fa-check-circle"></i>
                        <span>B·∫°n ƒë√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng. H·∫πn g·∫∑p l·∫°i!</span>
                    </div>

                    <div class="alert alert-success" th:if="${successMessage}">
                        <i class="fas fa-check-circle"></i>
                        <span th:text="${successMessage}">ƒêƒÉng k√Ω th√†nh c√¥ng!</span>
                    </div>

                    <!-- Login Form -->
                    <form id="loginForm" method="post" th:action="@{/perform-login}">
                        <div class="form-floating-enhanced">
                            <i class="input-icon fas fa-envelope"></i>
                            <input autocomplete="email"
                                   class="form-control"
                                   id="email"
                                   name="email"
                                   placeholder=" "
                                   required
                                   type="email">
                            <label class="form-label" for="email">ƒê·ªãa ch·ªâ Email</label>
                        </div>

                        <div class="form-floating-enhanced">
                            <i class="input-icon fas fa-lock"></i>
                            <input autocomplete="current-password"
                                   class="form-control"
                                   id="password"
                                   name="password"
                                   placeholder=" "
                                   required
                                   type="password">
                            <label class="form-label" for="password">M·∫≠t Kh·∫©u</label>
                            <button aria-label="Toggle password visibility" class="password-toggle"
                                    onclick="togglePassword('password', 'passwordIcon'); return false;"
                                    type="button">
                                <i class="fas fa-eye" id="passwordIcon"></i>
                            </button>
                        </div>

                        <div class="form-options">
                            <div class="checkbox-wrapper">
                                <input id="remember" name="remember-me" type="checkbox">
                                <label for="remember">Ghi nh·ªõ ƒëƒÉng nh·∫≠p</label>
                            </div>
                            <a class="forgot-link" href="#">Qu√™n m·∫≠t kh·∫©u?</a>
                        </div>

                        <button class="btn-submit" type="submit">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>ƒêƒÉng Nh·∫≠p</span>
                        </button>
                    </form>

                    <div class="divider">
                        <span>ho·∫∑c</span>
                    </div>

                    <div class="login-section">
                        <p class="login-text">B·∫°n ch∆∞a c√≥ t√†i kho·∫£n?</p>
                        <a class="login-link" href="/register">
                            <i class="fas fa-user-plus"></i>
                            <span>ƒêƒÉng k√Ω mi·ªÖn ph√≠ ngay</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script>
    function togglePassword(inputId, iconId) {
        const passwordField = document.getElementById(inputId);
        const passwordIcon = document.getElementById(iconId);

        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            passwordIcon.className = 'fas fa-eye-slash';
        } else {
            passwordField.type = 'password';
            passwordIcon.className = 'fas fa-eye';
        }
    }
</script>

</body>
</html>
